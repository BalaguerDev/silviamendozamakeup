---
const faqs = [
  {
    question: "¿Cuánto dura el servicio de maquillaje y peluquería?",
    answer: "El servicio dura entre 1.5 y 2 horas, dependiendo del tipo de maquillaje y recogido que elijas."
  },
  {
    question: "¿Con cuánta antelación debo reservar?",
    answer: "Recomendamos reservar con al menos 3 meses de antelación para asegurar tu fecha."
  },
  {
    question: "¿Qué productos utilizas?",
    answer: "Trabajamos con marcas de alta gama como MAC, NARS y Charlotte Tilbury."
  },
  {
    question: "¿Se puede incluir una prueba previa?",
    answer: "Sí, ofrecemos una prueba previa de maquillaje y peinado."
  },
  {
    question: "¿Viajas a domicilio el día de la boda?",
    answer: "¡Por supuesto! Me desplazo a tu domicilio o lugar de celebración."
  }
];
---
<h2>Preguntas frecuentes</h2>

<div class="faq" id="faq-container">
  {faqs.map((faq) => (
    <div class="faq-item">
      <h3 class="faq-question">
        {faq.question}
        <span class="arrow">▼</span>
      </h3>
      <p class="faq-answer">{faq.answer}</p>
    </div>
  ))}
</div>

<script>
const addFaqToggleLogic = () => {
  const faqContainer = document.getElementById("faq-container");
  if (!faqContainer) return;

  faqContainer.addEventListener("click", (event) => {
    const target = event.target as HTMLElement | null;
    if (!target) return;

    const header = target.closest(".faq-question"); 
    if (!header) return;

    const answer = header.nextElementSibling as HTMLElement | null;
    const arrow = header.querySelector(".arrow") as HTMLElement | null;

    if (answer) {
      answer.classList.toggle("active");
    }
    if (arrow) {
      arrow.classList.toggle("open");
    }
  });
};

document.addEventListener("astro:after-swap", addFaqToggleLogic);
document.addEventListener("DOMContentLoaded", addFaqToggleLogic);

</script>